{
  "AST": {
    "source": "((lambda () ;;;;;;;;;;;;;;;;;;;;;;;;;\n;; AuroraScheme测试用例 ;;\n;;;;;;;;;;;;;;;;;;;;;;;;;\n\n;; 准引用列表（quasiquote）\n\n(define printf\n  (lambda (template)\n    (cond ((null? template) #f)\n          ((not (list? template)) (display template))\n          (else {\n              (display (car template))\n              (printf (cdr template))\n          }))))\n\n(define a 100)\n\n(define qq `(\"a=${\" ,(car `((a ,(* a 2) ,a) 1 a ,a ,(* a a))) \"}\"))\n\n;; 直接输出\n;; 期望输出：a=${(a 200 100)}\n(printf qq)(newline)\n\n;; 准引用列表里面的unquote也应该是词法作用域的。\n;; 期望输出：a=${(a 200 100)}\n((lambda (a) (printf qq) (newline)) 200)\n))\n",
    "moduleQualifiedName": "quasiquote",
    "nodes": {
      "data": {
        "&quasiquote.APPLICATION_0": {
          "type": "APPLICATION",
          "parent": "&TOP_NODE",
          "children": [
            "&quasiquote.LAMBDA_1"
          ]
        },
        "&quasiquote.LAMBDA_1": {
          "type": "LAMBDA",
          "parent": "&quasiquote.APPLICATION_0",
          "children": [
            "lambda",
            [],
            "&quasiquote.APPLICATION_2",
            "&quasiquote.APPLICATION_17",
            "&quasiquote.APPLICATION_18",
            "&quasiquote.APPLICATION_27",
            "&quasiquote.APPLICATION_28",
            "&quasiquote.APPLICATION_29"
          ]
        },
        "&quasiquote.APPLICATION_2": {
          "type": "APPLICATION",
          "parent": "&quasiquote.LAMBDA_1",
          "children": [
            "define",
            "quasiquote.LAMBDA_1.printf",
            "&quasiquote.LAMBDA_3"
          ]
        },
        "&quasiquote.LAMBDA_3": {
          "type": "LAMBDA",
          "parent": "&quasiquote.APPLICATION_2",
          "children": [
            "lambda",
            [
              "quasiquote.LAMBDA_3.template"
            ],
            "&quasiquote.APPLICATION_4"
          ]
        },
        "&quasiquote.APPLICATION_4": {
          "type": "APPLICATION",
          "parent": "&quasiquote.LAMBDA_3",
          "children": [
            "cond",
            "&quasiquote.APPLICATION_5",
            "&quasiquote.APPLICATION_7",
            "&quasiquote.APPLICATION_11"
          ]
        },
        "&quasiquote.APPLICATION_5": {
          "type": "APPLICATION",
          "parent": "&quasiquote.APPLICATION_4",
          "children": [
            "&quasiquote.APPLICATION_6",
            "#f"
          ]
        },
        "&quasiquote.APPLICATION_6": {
          "type": "APPLICATION",
          "parent": "&quasiquote.APPLICATION_5",
          "children": [
            "null?",
            "quasiquote.LAMBDA_3.template"
          ]
        },
        "&quasiquote.APPLICATION_7": {
          "type": "APPLICATION",
          "parent": "&quasiquote.APPLICATION_4",
          "children": [
            "&quasiquote.APPLICATION_8",
            "&quasiquote.APPLICATION_10"
          ]
        },
        "&quasiquote.APPLICATION_8": {
          "type": "APPLICATION",
          "parent": "&quasiquote.APPLICATION_7",
          "children": [
            "not",
            "&quasiquote.APPLICATION_9"
          ]
        },
        "&quasiquote.APPLICATION_9": {
          "type": "APPLICATION",
          "parent": "&quasiquote.APPLICATION_8",
          "children": [
            "list?",
            "quasiquote.LAMBDA_3.template"
          ]
        },
        "&quasiquote.APPLICATION_10": {
          "type": "APPLICATION",
          "parent": "&quasiquote.APPLICATION_7",
          "children": [
            "display",
            "quasiquote.LAMBDA_3.template"
          ]
        },
        "&quasiquote.APPLICATION_11": {
          "type": "APPLICATION",
          "parent": "&quasiquote.APPLICATION_4",
          "children": [
            "else",
            "&quasiquote.APPLICATION_12"
          ]
        },
        "&quasiquote.APPLICATION_12": {
          "type": "APPLICATION",
          "parent": "&quasiquote.APPLICATION_11",
          "children": [
            "begin",
            "&quasiquote.APPLICATION_13",
            "&quasiquote.APPLICATION_15"
          ]
        },
        "&quasiquote.APPLICATION_13": {
          "type": "APPLICATION",
          "parent": "&quasiquote.APPLICATION_12",
          "children": [
            "display",
            "&quasiquote.APPLICATION_14"
          ]
        },
        "&quasiquote.APPLICATION_14": {
          "type": "APPLICATION",
          "parent": "&quasiquote.APPLICATION_13",
          "children": [
            "car",
            "quasiquote.LAMBDA_3.template"
          ]
        },
        "&quasiquote.APPLICATION_15": {
          "type": "APPLICATION",
          "parent": "&quasiquote.APPLICATION_12",
          "children": [
            "quasiquote.LAMBDA_1.printf",
            "&quasiquote.APPLICATION_16"
          ]
        },
        "&quasiquote.APPLICATION_16": {
          "type": "APPLICATION",
          "parent": "&quasiquote.APPLICATION_15",
          "children": [
            "cdr",
            "quasiquote.LAMBDA_3.template"
          ]
        },
        "&quasiquote.APPLICATION_17": {
          "type": "APPLICATION",
          "parent": "&quasiquote.LAMBDA_1",
          "children": [
            "define",
            "quasiquote.LAMBDA_1.a",
            100
          ]
        },
        "&quasiquote.APPLICATION_18": {
          "type": "APPLICATION",
          "parent": "&quasiquote.LAMBDA_1",
          "children": [
            "define",
            "quasiquote.LAMBDA_1.qq",
            "&quasiquote.QUASIQUOTE_19"
          ]
        },
        "&quasiquote.QUASIQUOTE_19": {
          "type": "QUASIQUOTE",
          "parent": "&quasiquote.APPLICATION_18",
          "children": [
            "&quasiquote.STRING_20",
            "&quasiquote.UNQUOTE_21",
            "&quasiquote.STRING_26"
          ]
        },
        "&quasiquote.STRING_20": {
          "type": "STRING",
          "content": "\"a=${\""
        },
        "&quasiquote.UNQUOTE_21": {
          "type": "UNQUOTE",
          "parent": "&quasiquote.QUASIQUOTE_19",
          "children": [
            "car",
            "&quasiquote.QUASIQUOTE_22"
          ]
        },
        "&quasiquote.QUASIQUOTE_22": {
          "type": "QUASIQUOTE",
          "parent": "&quasiquote.UNQUOTE_21",
          "children": [
            "&quasiquote.QUASIQUOTE_23",
            1,
            "'a",
            "quasiquote.LAMBDA_1.a",
            "&quasiquote.UNQUOTE_25"
          ]
        },
        "&quasiquote.QUASIQUOTE_23": {
          "type": "QUASIQUOTE",
          "parent": "&quasiquote.QUASIQUOTE_22",
          "children": [
            "'a",
            "&quasiquote.UNQUOTE_24",
            "quasiquote.LAMBDA_1.a"
          ]
        },
        "&quasiquote.UNQUOTE_24": {
          "type": "UNQUOTE",
          "parent": "&quasiquote.QUASIQUOTE_23",
          "children": [
            "*",
            "quasiquote.LAMBDA_1.a",
            2
          ]
        },
        "&quasiquote.UNQUOTE_25": {
          "type": "UNQUOTE",
          "parent": "&quasiquote.QUASIQUOTE_22",
          "children": [
            "*",
            "quasiquote.LAMBDA_1.a",
            "quasiquote.LAMBDA_1.a"
          ]
        },
        "&quasiquote.STRING_26": {
          "type": "STRING",
          "content": "\"}\""
        },
        "&quasiquote.APPLICATION_27": {
          "type": "APPLICATION",
          "parent": "&quasiquote.LAMBDA_1",
          "children": [
            "quasiquote.LAMBDA_1.printf",
            "quasiquote.LAMBDA_1.qq"
          ]
        },
        "&quasiquote.APPLICATION_28": {
          "type": "APPLICATION",
          "parent": "&quasiquote.LAMBDA_1",
          "children": [
            "newline"
          ]
        },
        "&quasiquote.APPLICATION_29": {
          "type": "APPLICATION",
          "parent": "&quasiquote.LAMBDA_1",
          "children": [
            "&quasiquote.LAMBDA_30",
            200
          ]
        },
        "&quasiquote.LAMBDA_30": {
          "type": "LAMBDA",
          "parent": "&quasiquote.APPLICATION_29",
          "children": [
            "lambda",
            [
              "quasiquote.LAMBDA_30.a"
            ],
            "&quasiquote.APPLICATION_31",
            "&quasiquote.APPLICATION_32"
          ]
        },
        "&quasiquote.APPLICATION_31": {
          "type": "APPLICATION",
          "parent": "&quasiquote.LAMBDA_30",
          "children": [
            "quasiquote.LAMBDA_1.printf",
            "quasiquote.LAMBDA_1.qq"
          ]
        },
        "&quasiquote.APPLICATION_32": {
          "type": "APPLICATION",
          "parent": "&quasiquote.LAMBDA_30",
          "children": [
            "newline"
          ]
        }
      },
      "metadata": {
        "&quasiquote.APPLICATION_0": "S_M",
        "&quasiquote.LAMBDA_1": "S_M",
        "&quasiquote.APPLICATION_2": "S_M",
        "&quasiquote.LAMBDA_3": "S_M",
        "&quasiquote.APPLICATION_4": "S_M",
        "&quasiquote.APPLICATION_5": "S_M",
        "&quasiquote.APPLICATION_6": "S_M",
        "&quasiquote.APPLICATION_7": "S_M",
        "&quasiquote.APPLICATION_8": "S_M",
        "&quasiquote.APPLICATION_9": "S_M",
        "&quasiquote.APPLICATION_10": "S_M",
        "&quasiquote.APPLICATION_11": "S_M",
        "&quasiquote.APPLICATION_12": "S_M",
        "&quasiquote.APPLICATION_13": "S_M",
        "&quasiquote.APPLICATION_14": "S_M",
        "&quasiquote.APPLICATION_15": "S_M",
        "&quasiquote.APPLICATION_16": "S_M",
        "&quasiquote.APPLICATION_17": "S_M",
        "&quasiquote.APPLICATION_18": "S_M",
        "&quasiquote.QUASIQUOTE_19": "S_M",
        "&quasiquote.STRING_20": "S_M",
        "&quasiquote.UNQUOTE_21": "S_M",
        "&quasiquote.QUASIQUOTE_22": "S_M",
        "&quasiquote.QUASIQUOTE_23": "S_M",
        "&quasiquote.UNQUOTE_24": "S_M",
        "&quasiquote.UNQUOTE_25": "S_M",
        "&quasiquote.STRING_26": "S_M",
        "&quasiquote.APPLICATION_27": "S_M",
        "&quasiquote.APPLICATION_28": "S_M",
        "&quasiquote.APPLICATION_29": "S_M",
        "&quasiquote.LAMBDA_30": "S_M",
        "&quasiquote.APPLICATION_31": "S_M",
        "&quasiquote.APPLICATION_32": "S_M"
      },
      "handleCounter": 33
    },
    "nodeIndexes": {
      "&quasiquote.APPLICATION_0": 0,
      "&quasiquote.LAMBDA_1": 1,
      "&quasiquote.APPLICATION_2": 110,
      "&quasiquote.LAMBDA_3": 127,
      "&quasiquote.APPLICATION_4": 150,
      "&quasiquote.APPLICATION_5": 156,
      "&quasiquote.APPLICATION_6": 157,
      "&quasiquote.APPLICATION_7": 188,
      "&quasiquote.APPLICATION_8": 189,
      "&quasiquote.APPLICATION_9": 194,
      "&quasiquote.APPLICATION_10": 212,
      "&quasiquote.APPLICATION_11": 242,
      "&quasiquote.APPLICATION_12": 248,
      "&quasiquote.APPLICATION_13": 264,
      "&quasiquote.APPLICATION_14": 273,
      "&quasiquote.APPLICATION_15": 303,
      "&quasiquote.APPLICATION_16": 311,
      "&quasiquote.APPLICATION_17": 344,
      "&quasiquote.APPLICATION_18": 360,
      "&quasiquote.QUASIQUOTE_19": 372,
      "&quasiquote.STRING_20": 373,
      "&quasiquote.UNQUOTE_21": 381,
      "&quasiquote.QUASIQUOTE_22": 387,
      "&quasiquote.QUASIQUOTE_23": 388,
      "&quasiquote.UNQUOTE_24": 392,
      "&quasiquote.UNQUOTE_25": 412,
      "&quasiquote.STRING_26": 422,
      "&quasiquote.APPLICATION_27": 462,
      "&quasiquote.APPLICATION_28": 473,
      "&quasiquote.APPLICATION_29": 539,
      "&quasiquote.LAMBDA_30": 540,
      "&quasiquote.APPLICATION_31": 552,
      "&quasiquote.APPLICATION_32": 564
    },
    "lambdaHandles": [
      "&quasiquote.LAMBDA_1",
      "&quasiquote.LAMBDA_3",
      "&quasiquote.LAMBDA_30"
    ],
    "tailcall": [
      "&quasiquote.APPLICATION_10",
      "&quasiquote.APPLICATION_15",
      "&quasiquote.APPLICATION_12",
      "&quasiquote.APPLICATION_32",
      "&quasiquote.APPLICATION_29",
      "&quasiquote.APPLICATION_0"
    ],
    "variableMapping": {
      "quasiquote.LAMBDA_1.printf": "printf",
      "quasiquote.LAMBDA_3.template": "template",
      "quasiquote.LAMBDA_1.a": "a",
      "quasiquote.LAMBDA_1.qq": "qq",
      "quasiquote.LAMBDA_30.a": "a"
    },
    "topVariables": {
      "printf": "quasiquote.LAMBDA_1.printf",
      "a": "quasiquote.LAMBDA_1.a",
      "qq": "quasiquote.LAMBDA_1.qq"
    },
    "dependencies": {},
    "natives": {}
  },
  "ILCode": [
    "call @&quasiquote.LAMBDA_1",
    "halt",
    "@&quasiquote.LAMBDA_1",
    "push @&quasiquote.LAMBDA_3",
    "store quasiquote.LAMBDA_1.printf",
    "push 100",
    "store quasiquote.LAMBDA_1.a",
    "load quasiquote.LAMBDA_1.a",
    "push 2",
    "mul",
    "push 1",
    "set-child! &quasiquote.QUASIQUOTE_23",
    "load quasiquote.LAMBDA_1.a",
    "push 2",
    "set-child! &quasiquote.QUASIQUOTE_23",
    "push &quasiquote.QUASIQUOTE_23",
    "duplicate",
    "load quasiquote.LAMBDA_1.a",
    "push 3",
    "set-child! &quasiquote.QUASIQUOTE_22",
    "load quasiquote.LAMBDA_1.a",
    "load quasiquote.LAMBDA_1.a",
    "mul",
    "push 4",
    "set-child! &quasiquote.QUASIQUOTE_22",
    "push &quasiquote.QUASIQUOTE_22",
    "duplicate",
    "car",
    "push 1",
    "set-child! &quasiquote.QUASIQUOTE_19",
    "push &quasiquote.QUASIQUOTE_19",
    "duplicate",
    "store quasiquote.LAMBDA_1.qq",
    "load quasiquote.LAMBDA_1.qq",
    "call quasiquote.LAMBDA_1.printf",
    "newline",
    "push 200",
    "tailcall @&quasiquote.LAMBDA_30",
    "return",
    "@&quasiquote.LAMBDA_3",
    "store quasiquote.LAMBDA_3.template",
    "@COND_BRANCH_quasiquote.ID0_1",
    "load quasiquote.LAMBDA_3.template",
    "null?",
    "iffalse @COND_BRANCH_quasiquote.ID0_2",
    "push #f",
    "goto @COND_END_quasiquote.ID0",
    "@COND_BRANCH_quasiquote.ID0_2",
    "load quasiquote.LAMBDA_3.template",
    "list?",
    "not",
    "iffalse @COND_BRANCH_quasiquote.ID0_3",
    "load quasiquote.LAMBDA_3.template",
    "display",
    "goto @COND_END_quasiquote.ID0",
    "@COND_BRANCH_quasiquote.ID0_3",
    "load quasiquote.LAMBDA_3.template",
    "car",
    "display",
    "load quasiquote.LAMBDA_3.template",
    "cdr",
    "tailcall quasiquote.LAMBDA_1.printf",
    "@COND_END_quasiquote.ID0",
    "return",
    "@&quasiquote.LAMBDA_30",
    "store quasiquote.LAMBDA_30.a",
    "load quasiquote.LAMBDA_1.qq",
    "call quasiquote.LAMBDA_1.printf",
    "newline",
    "return"
  ]
}